services:
      app:
        container_name: franchise-api-prod
        build:
          context: .
          dockerfile: Dockerfile
        ports:
          - "${PORT:-8081}:8081"
        environment:
          SPRING_PROFILES_ACTIVE: prod
          DB_PASSWORD: ${DB_PASSWORD}
          JAVA_OPTS: ${JAVA_OPTS:--Xmx512m -Xms256m -server}
          PORT: 8081
        networks:
          - franchise-network
        restart: unless-stopped
        healthcheck:
          test: ["CMD", "curl", "-f", "http://localhost:8081/actuator/health"]
          interval: 30s
          timeout: 10s
          retries: 3
          start_period: 60s
        deploy:
          resources:
            limits:
              memory: 1g
            reservations:
              memory: 512m

    networks:
      franchise-network:
        driver: bridge